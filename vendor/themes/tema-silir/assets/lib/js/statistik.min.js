function showHideToggle(){$("#showData").click(),showZeroValue(showMore),showMore=!showMore,showMore?$("#showZero").text("Tampilkan Nol"):$("#showZero").text("Sembunyikan Nol")}function showZeroValue(t=!1){t?$(".zero").closest("tr").show():$(".zero").closest("tr").hide()}function switchType(t,a){statChart.update({chart:{options3d:{alpha:a}},series:[{type:t}]})}function fetchDataStats(){return new Promise((t,a)=>{$.ajax({url:statistikUrl,method:"get",data:{},beforeSend:function(){$("#showData").hide()},success:function(a){const e=a.data.map(t=>{const{id:a}=t,{nama:e,jumlah:n,laki:o,perempuan:s,persen:r,persen1:i,persen2:l}=t.attributes;return{id:a,nama:e,jumlah:n,laki:o,perempuan:s,persen:r,persen1:i,persen2:l}});t(e)},error:function(t){console.error("Error fetching data:",t),a(t)}})})}function initializeChart(t){const a=[],e=[];for(const n of t)if("TOTAL"!==n.nama&&"JUMLAH"!==n.nama&&"PENERIMA"!==n.nama){const t=[n.nama,parseInt(n.jumlah,10)];a.push(n.nama),e.push(t)}statChart=new Highcharts.Chart({chart:{renderTo:"statistics-one",options3d:{enabled:enable3d,alpha:45,beta:10}},title:0,yAxis:{showEmpty:!1,title:{text:"Jumlah Populasi"}},xAxis:{categories:a},plotOptions:{series:{colorByPoint:!0},column:{pointPadding:-.1,borderWidth:0,showInLegend:!1,depth:50,viewDistance:25},pie:{allowPointSelect:!0,cursor:"pointer",showInLegend:!1,depth:30,innerSize:30}},legend:{enabled:!0},series:[{type:"pie",name:"Jumlah Populasi",shadow:1,border:1,data:e}]})}function populateTable(t){const a=document.getElementById("statistic-table"),e=a.querySelector("tbody");let n=!1;e.innerHTML="",t.forEach((t,a)=>{const o=document.createElement("tr");a>11&&!["666","777","888"].includes(t.id)&&(o.className="more",n=!0);for(let e in t){const n=document.createElement("td");let s=t[e],r="text-right";"id"===e&&(r="text-center",s=a+1,["666","777","888"].includes(t[e])&&(s="")),"nama"===e&&(r="text-left"),"jumlah"===e&&t[e]<=0&&(["666","777","888"].includes(t.id)||(r+=" zero")),n.className=r,n.textContent=s,o.appendChild(n)}e.appendChild(o)}),n&&$("#showData").show(),$("#statistics-one").trigger("change")}let statChart,showMore=!0;$(document).ready(()=>{fetchDataStats().then(t=>{if($("#statistics-one").length&&initializeChart(t),populateTable(t),showZeroValue(!1),$("#showZero").click(()=>showHideToggle()),$(".button-switch").click(function(){const t=$(this).data("type"),a="pie"===t?45:20;$(this).addClass("is-active"),$(this).siblings(".button-switch").removeClass("is-active"),$(this).prop("disabled",!0),$(this).siblings(".button-switch").prop("disabled",!1),switchType(t,a)}),$("#showData").click(()=>{$("tr.more").show(),$("#showData").hide(),showZeroValue(!1)}),$("#peserta_program_bantuan").length){const t=$("#peserta_program_bantuan").DataTable({processing:!0,serverSide:!0,order:[],ajax:{url:bantuanUrl,type:"GET",data:function(t){const a=t.order[0]?t.order[0].column:null,e=t.order[0]?t.order[0].dir:"asc",n=null!==a?t.columns[a].name:"";return{"page[size]":t.length,"page[number]":t.start/t.length+1,"filter[search]":t.search.value,sort:("asc"===e?"":"-")+n}},dataSrc:function(t){return t.recordsTotal=t.meta.pagination.total,t.recordsFiltered=t.meta.pagination.total,t.data}},columns:[{data:null},{data:"attributes.nama",name:"nama"},{data:"attributes.kartu_nama",name:"kartu_nama"},{data:"attributes.kartu_alamat",name:"kartu_alamat",orderable:!1,searchable:!1}],order:[1,"asc"],language:{url:`${BASE_URL}/assets/bootstrap/js/dataTables.indonesian.lang`},drawCallback:function(){$(".dataTables_paginate > .pagination").addClass("pagination-sm no-margin")}});t.on("draw.dt",function(){const a=$("#peserta_program_bantuan").DataTable().page.info();t.column(0,{page:"current"}).nodes().each(function(t,e){t.innerHTML=e+1+a.start})})}}).catch(t=>{console.error("Initialization failed:",t)}),$("#tahun").change(function(){const t=window.location.href.split("?")[0];window.location.href=`${t}?tahun=${$(this).val()}`})});