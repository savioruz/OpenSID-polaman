function showHideToggle(){$("#showData").click(),showZeroValue(showMore),showMore=!showMore,showMore?$("#showZero").text("Tampilkan Nol"):$("#showZero").text("Sembunyikan Nol")}function showZeroValue(e=!1){e?$(".zero").closest("tr").show():$(".zero").closest("tr").hide()}function switchType(e,t){statChart.update({chart:{options3d:{alpha:t}},series:[{type:e}]})}function fetchDataStats(){return new Promise((e,t)=>{$.ajax({url:statistikUrl,method:"get",data:{},beforeSend:function(){$("#showData").hide()},success:function(t){const a=t.data.map(e=>{const{id:t}=e,{nama:a,jumlah:n,laki:o,perempuan:s,persen:i,persen1:r,persen2:l}=e.attributes;return{id:t,nama:a,jumlah:n,laki:o,perempuan:s,persen:i,persen1:r,persen2:l}});e(a)},error:function(e){console.error("Error fetching data:",e),t(e)}})})}function initializeChart(e){const t=[],a=[];for(const n of e)if("TOTAL"!==n.nama&&"JUMLAH"!==n.nama&&"PENERIMA"!==n.nama){const e=[n.nama,parseInt(n.jumlah,10)];t.push(n.nama),a.push(e)}statChart=new Highcharts.Chart({chart:{renderTo:"statistics-one",options3d:{enabled:enable3d,alpha:45,beta:10}},title:0,yAxis:{showEmpty:!1,title:{text:"Jumlah Populasi"}},xAxis:{categories:t},plotOptions:{series:{colorByPoint:!0},column:{pointPadding:-.1,borderWidth:0,showInLegend:!1,depth:50,viewDistance:25},pie:{allowPointSelect:!0,cursor:"pointer",showInLegend:!1,depth:30,innerSize:30}},legend:{enabled:!0},series:[{type:"pie",name:"Jumlah Populasi",shadow:1,border:1,data:a}]})}function populateTable(e){const t=document.getElementById("statistic-table"),a=t.querySelector("tbody");let n=!1;a.innerHTML="",e.forEach((e,t)=>{const o=document.createElement("tr");t>11&&!["666","777","888"].includes(e.id)&&(o.className="more",n=!0);for(let a in e){const n=document.createElement("td");let s=e[a],i="text-right";"id"===a&&(i="text-center",s=t+1,["666","777","888"].includes(e[a])&&(s="")),"nama"===a&&(i="text-left"),"jumlah"===a&&e[a]<=0&&(["666","777","888"].includes(e.id)||(i+=" zero")),n.className=i,n.textContent=s,o.appendChild(n)}a.appendChild(o)}),n&&$("#showData").show(),$("#statistics-one").trigger("change")}let statChart,showMore=!0;$(document).ready(()=>{fetchDataStats().then(e=>{$("#statistics-one").length&&initializeChart(e),populateTable(e),showZeroValue(!1),$("#showZero").click(()=>showHideToggle()),$(".button-switch").click(function(){const e=$(this).data("type"),t="pie"===e?45:20;$(this).addClass("is-active"),$(this).siblings(".button-switch").removeClass("is-active"),$(this).prop("disabled",!0),$(this).siblings(".button-switch").prop("disabled",!1),switchType(e,t)}),$("#showData").click(()=>{$("tr.more").show(),$("#showData").hide(),showZeroValue(!1)}),$("#peserta_program_bantuan").length&&$("#peserta_program_bantuan").DataTable({processing:!0,serverSide:!0,pageLength:10,order:[],ajax:{url:bantuanUrl,type:"get"},columnDefs:[{targets:[0,3],orderable:!1}],language:{url:`${BASE_URL}/assets/bootstrap/js/dataTables.indonesian.lang`},drawCallback:()=>{$(".dataTables_paginate > .pagination").addClass("pagination-sm no-margin")}})}).catch(e=>{console.error("Initialization failed:",e)}),$("#tahun").change(function(){const e=window.location.href.split("?")[0];window.location.href=`${e}?tahun=${$(this).val()}`})});